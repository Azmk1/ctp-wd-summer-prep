import { SlideLayout, Image, FlexBox, Box} from 'spectacle'

<SlideLayout.Full>
## Common Pitfalls
<CodeDisplay >
  <File name="example.js">
    
```javascript
// Equality confusion
console.log(0 == false);    // true (loose equality)
console.log(0 === false);   // false (strict equality)

// Floating point precision
console.log(0.1 + 0.2);     // 0.30000000000000004

// Array/Object references
const arr1 = [1, 2, 3];
const arr2 = arr1;
arr2.push(4);
console.log(arr1);          // [1, 2, 3, 4]

// "this" binding
const obj = {
  name: "Object",
  greet: function() {
    setTimeout(function() {
      console.log(this.name); // undefined!
    }, 1000);
  }
};
```
    
  </File>
</CodeDisplay>
</SlideLayout.Full>

<SlideLayout.Full>
## Understanding "this" Binding Problems

The `this` keyword can be confusing because its value depends on how a function is called:

**Function Context Rules:**
1. **Method calls**: `obj.method()` - `this` is `obj`
2. **Function calls**: `function()` - `this` is `window` (or `undefined` in strict mode)
3. **Arrow functions**: Always inherit `this` from enclosing scope
4. **Event handlers**: `this` is the element that triggered the event

**Common Problem - Lost Context:**
```javascript
const obj = {
  name: "MyObject",
  method() {
    console.log(this.name); // "MyObject"
    
    setTimeout(function() {
      console.log(this.name); // undefined! (this is window/global)
    }, 1000);
  }
};
```

**Solutions**: Arrow functions, `.bind()`, or saving `this` to a variable
</SlideLayout.Full>

<SlideLayout.Full>
## Arrow Functions vs Regular Functions

**Regular Function - Dynamic `this`:**
```javascript
const obj = {
  name: "Timer",
  start() {
    setInterval(function() {
      console.log(this.name); // this = window (not obj!)
    }, 1000);
  }
};
```

**Arrow Function - Lexical `this`:**
```javascript
const obj = {
  name: "Timer", 
  start() {
    setInterval(() => {
      console.log(this.name); // this = obj âœ…
    }, 1000);
  }
};
```

**For the exercise**: Fix the timer by ensuring `this` refers to the timer object inside the callback.
</SlideLayout.Full>

<SlideLayout.Full>
## Exercise: Fix the "this" Problem
<CodeDisplay >
  <File name="example.js">
    
```javascript
// Fix the code so it prints countdown from 5 to 0, then "Timer: Done!"
const timer = {
  name: "Timer",
  seconds: 5,
  outputs: [], // Track outputs for testing
  
  start() {
    const interval = setInterval(function() {
      console.log(this.seconds); // undefined!
      this.seconds--;
      
      if (this.seconds < 0) {
        clearInterval(interval);
        console.log(this.name + ": Done!"); // undefined: Done!
      }
    }, 100); // Faster for testing
  }
};

timer.start();
```
    
  </File>
</CodeDisplay>
</SlideLayout.Full>