import { SlideLayout, Image, FlexBox, Box, Text} from 'spectacle'
import { CodeDisplay, File, Tests } from '../components/CodeDisplayWithSlideTracking'

<SlideLayout.Full>
## Objects and Arrays
### The Foundation of Data Structures
</SlideLayout.Full>

<SlideLayout.Full>
 ## What Are Objects?
  - Collections of key-value pairs
  - Store related data and functionality together
  - Foundation of object-oriented programming in JS
  - Similar to dictionaries, maps, or hash tables
</SlideLayout.Full>
<SlideLayout.Full>
  ## Real-world analogy: 
  A habit tracker app is like an object
  - Properties: name, streak, category
   Methods: complete(), reset(), getStatus()
</SlideLayout.Full>

<SlideLayout.Full>
## Why Objects Matter
<CodeDisplay >
  <File name="example.js">
    
```javascript
// Without objects - messy and hard to maintain
let habitName = "Morning Exercise";
let habitCategory = "health";
let habitStreak = 5;
let habitIsActive = true;

// With objects - clean and organized
const habit = {
  name: "Morning Exercise",
  category: "health",
  streak: 5,
  isActive: true
};

// Objects group related data
console.log(habit.name); // "Morning Exercise"
console.log(habit.streak); // 5
```
    
  </File>
</CodeDisplay>
</SlideLayout.Full>

<SlideLayout.Full>
  <FlexBox alignItems="center" justifyContent="center" flexDirection="column">
    ## Object Syntax and Access
    - Two ways to create objects:
        - Object literal notation: {`{ key: value }`}
        - Constructor notation: new Object()
    - Two ways to access properties:
        - Dot notation: object.property
        - Bracket notation: object["property"]
  </FlexBox>
</SlideLayout.Full>

<SlideLayout.Full>
## Understanding Object-Oriented Thinking

Before building objects, think about the real world: Objects Group Related data

- A habit has a name, category, streak count, and active status
- Instead of separate variables, group them into one object
- Objects can also contain functions (methods) that work with their data
</SlideLayout.Full>
<SlideLayout.Full>
## Objects vs. Separate Variables

```javascript
// Without objects - scattered data
let habitName = "Morning Exercise";
let habitCategory = "health";
let habitStreak = 5;
let habitActive = true;

// With objects - organized data
const habit = {
  name: "Morning Exercise",
  category: "health",
  streak: 5,
  isActive: true
};
```
</SlideLayout.Full>

<SlideLayout.Full>
## Object Structure Planning

**Ask these questions when designing objects:**

1. **What properties does this thing have?**
   - Name, category, streak count, completion status
2. **What actions can this thing perform?**
   - Complete a day, reset streak, get status
3. **How will other code interact with this object?**
   - Call methods, read properties, pass to functions

```javascript
const habit = {
  // Properties (data)
  name: "Exercise",
  streak: 5,
  
  // Methods (actions)
  complete() { this.streak++; },
  reset() { this.streak = 0; },
  getStatus() { return `${this.name}: ${this.streak} days`; }
};
```
</SlideLayout.Full>

<SlideLayout.Full>
## Benefits of Objects

**Why use objects over separate variables?**

- **Organized, maintainable code**
  - Related data stays together
  - Easy to find and update

- **Easier to pass around related data**
  - One parameter instead of many
  - Clear relationships

- **Foundation for more advanced patterns**
  - Classes, inheritance, composition
  - Design patterns and architectures

```javascript
// Easy to pass complete habit data
function saveHabit(habit) {
  localStorage.setItem(`habit_${habit.id}`, JSON.stringify(habit));
}

// Easy to work with collections
const habits = [exerciseHabit, readingHabit, meditationHabit];
habits.forEach(habit => habit.complete());
```
</SlideLayout.Full>

<SlideLayout.Full>
## Object Syntax and Best Practices

**Object Literal Creation:**
```javascript
const habit = {
  name: "Morning Exercise",
  category: "health", 
  streakDays: 5,
  isActive: true,
  
  // Methods use 'this' to access properties
  complete() {
    this.streakDays++;
    console.log(`${this.name} completed! Streak: ${this.streakDays}`);
  }
};
```

**Key Concepts for the Exercise:**
- Property access: `habit.name` vs `habit["name"]`
- Method definition and the `this` keyword
- Dynamic property access with variables
- Adding and modifying properties after creation
</SlideLayout.Full>

<SlideLayout.Full>
## Objects: JavaScript's Building Blocks

<CodeDisplay >
  <File name="habit.js">
    
```javascript
// Exercise: Create a habit object
// TODO: Create an object representing a habit with:
// - name (string)
// - category (string)
// - streakDays (number)
// - isActive (boolean)
// - complete() method that increments streakDays

// Your code here...
```
    
    
```javascript
// Step 1: Basic object literal
const habit = {
  name: "Morning Exercise",
  category: "health",
  streakDays: 0,
  isActive: true
};

// Accessing properties
console.log(habit.name);        // Dot notation
console.log(habit["category"]); // Bracket notation

// Dynamic property access
const prop = "streakDays";
console.log(habit[prop]);       // 0
```
    
    
```javascript
// Step 2: Add methods and use 'this'
const habit = {
  name: "Morning Exercise",
  category: "health",
  streakDays: 0,
  isActive: true,
  
  complete() {
    this.streakDays++;
    console.log(`${this.name} completed! Streak: ${this.streakDays}`);
  },
  
  reset() {
    this.streakDays = 0;
    console.log(`${this.name} streak reset.`);
  },
  
  getStatus() {
    return `${this.name}: ${this.streakDays} day streak`;
  }
};

// Use the methods
habit.complete(); // Morning Exercise completed! Streak: 1
habit.complete(); // Morning Exercise completed! Streak: 2
console.log(habit.getStatus()); // Morning Exercise: 2 day streak
```
    
  </File>
  <Tests>
    
```javascript
// Test: Check habit object structure
describe('Habit Object', () => {
  it('should define a variable called `habit`', () => {
    expect(typeof habit).to.be('object');
  });

  it('should have required properties', () => {
    expect(habit).to.have.property('name');
    expect(habit).to.have.property('category');
    expect(habit).to.have.property('streakDays');
    expect(habit).to.have.property('isActive');
  });
  
  it('should have complete method', () => {
    expect(habit.complete).to.be.a('function');
    const initialStreak = habit.streakDays;
    habit.complete();
    expect(habit.streakDays).to.equal(initialStreak + 1);
  });

  it('should have correct initial values', () => {
    expect(habit.name).to.equal("Morning Exercise");
    expect(habit.category).to.equal("health");
    expect(habit.streakDays).to.equal(0);
    expect(habit.isActive).to.be.true;
  });

  it('should increment streak on complete', () => {
    const startStreak = habit.streakDays;
    habit.complete();
    expect(habit.streakDays).to.equal(startStreak + 1);
  });
  
  it('should reset streak to 0', () => {
    habit.reset();
    expect(habit.streakDays).to.equal(0);
  });
  
  it('should return status string', () => {
    expect(habit.getStatus()).to.be.a('string');
    expect(habit.getStatus()).to.contain(habit.name);
  });
});
```
    
  </Tests>
</CodeDisplay>
</SlideLayout.Full>

<SlideLayout.Full>
  <FlexBox alignItems="center" justifyContent="center" flexDirection="column">
    ## Object Methods and 'this'
    **Objects can contain functions (methods)**
    
    **The 'this' keyword refers to the current object**
    
    - Methods can access object properties using 'this'
    - Methods can modify object state
    - Methods enable object-oriented programming
  </FlexBox>
</SlideLayout.Full>

<SlideLayout.Full>
## Modern Object Features
<CodeDisplay >
  <File name="example.js">
    
```javascript
// Destructuring - extract values easily
const { name, category } = habit;

// Spread operator - copy and extend objects
const updatedHabit = { ...habit, streak: 10 };

// Computed property names
const propName = "lastCompleted";
const habitWithDate = {
  ...habit,
  [propName]: "2024-01-20"
};

// Object shorthand
const streak = 7;
const points = 100;
const stats = { streak, points }; // Same as { streak: streak, points: points }
```
    
  </File>
</CodeDisplay>
</SlideLayout.Full>

<SlideLayout.Full>
## Exercise: Building a Habit Tracker
<CodeDisplay >
  <File name="example.js">
    
```javascript
// Exercise: Build a habit tracker object
// TODO: Create a habitTracker object with:
// 1. habits array to store habit objects
// 2. addHabit(name, category) method
// 3. completeHabit(name) method that finds and marks habit complete
// 4. getTotalPoints() method (each completion = 10 points)

const habitTracker = {
  habits: [],
  
  addHabit(name, category) {
    // Your code here
  },
  
  completeHabit(name) {
    // Your code here
  },
  
  getTotalPoints() {
    // Your code here
  }
};

// Test it
habitTracker.addHabit("Drink Water", "health");
habitTracker.addHabit("Read 30 mins", "learning");
habitTracker.completeHabit("Drink Water");
console.log(habitTracker.getTotalPoints()); // Should be 10
```
    
  </File>
</CodeDisplay>
</SlideLayout.Full>

<SlideLayout.Full>
  <FlexBox alignItems="center" justifyContent="center" flexDirection="column">
    ## What Are Arrays?
    - Ordered collections of values
    - Zero-indexed (first element is at index 0)
    - Can hold any data type, including mixed types
    - Dynamic size - can grow or shrink
    
    **Real-world analogy:**
    - A list of daily habit completions
    - Each day's data stored in order
  </FlexBox>
</SlideLayout.Full>

<SlideLayout.Full>
## Array Basics
<CodeDisplay >
  <File name="example.js">
    
```javascript
// Creating arrays
const habits = ["Exercise", "Read", "Meditate"];
const points = [10, 20, 15, 30];
const mixed = ["Habit", 42, true, { name: "Exercise" }];

// Accessing elements
console.log(habits[0]);  // "Exercise" (first element)
console.log(habits[2]);  // "Meditate" (third element)

// Array properties
console.log(habits.length); // 3

// Modifying arrays
habits[1] = "Study";     // Change element
habits.push("Journal");  // Add to end
habits.pop();           // Remove from end
```
    
  </File>
</CodeDisplay>
</SlideLayout.Full>

<SlideLayout.Full>
  <FlexBox alignItems="center" justifyContent="center" flexDirection="column">
    ## Array Methods: The Power Tools
    **Transformation Methods:**
    - map() - transform each element
    - filter() - select elements that match criteria
    - reduce() - combine all elements into single value
    
    **Search Methods:**
    - find() - get first matching element
    - some() - check if any element matches
    - every() - check if all elements match
  </FlexBox>
</SlideLayout.Full>

<SlideLayout.Full>
## Core Array Operations

Arrays are essential for managing collections of data:

**Four main operations:**
- **Access**: Get elements by index
- **Modify**: Change elements or add/remove items  
- **Search**: Find elements that match criteria
- **Transform**: Convert data from one format to another

```javascript
const habits = ['Exercise', 'Reading', 'Meditation'];

// Access
console.log(habits[0]); // 'Exercise'

// Modify  
habits.push('Journaling'); // Add item
habits[1] = 'Study'; // Change item

// Search
const found = habits.find(h => h.startsWith('E')); // 'Exercise'

// Transform
const upper = habits.map(h => h.toUpperCase()); // ['EXERCISE', ...]
```
</SlideLayout.Full>

<SlideLayout.Full>
## Functional Array Methods

**Modern JavaScript array methods:**

- `map()` - Transform each element
- `filter()` - Select elements that match criteria
- `reduce()` - Combine all elements into a single value
- `find()` - Get the first matching element

```javascript
const habits = [
  { name: 'Exercise', points: 10, completed: true },
  { name: 'Reading', points: 5, completed: false },
  { name: 'Meditation', points: 8, completed: true }
];

// Get names of completed habits
const completedNames = habits
  .filter(habit => habit.completed)
  .map(habit => habit.name);
  
console.log(completedNames); // ['Exercise', 'Meditation']
```
</SlideLayout.Full>

<SlideLayout.Full>
## Array Processing Pattern

**The Pattern**: Start with data → process it → get results

```javascript
const dailyHabits = [
  { name: 'Exercise', completed: true, points: 10 },
  { name: 'Reading', completed: false, points: 5 },
  { name: 'Meditation', completed: true, points: 8 },
  { name: 'Water', completed: true, points: 3 }
];

// Process: filter completed → extract points → sum total
const totalPoints = dailyHabits
  .filter(habit => habit.completed)     // [Exercise, Meditation, Water]
  .map(habit => habit.points)           // [10, 8, 3]
  .reduce((sum, points) => sum + points, 0); // 21

console.log(`Today's points: ${totalPoints}`);
```

**Key insight**: Chain methods to create powerful data processing pipelines
</SlideLayout.Full>

<SlideLayout.Full>
## Array Method Patterns for Data Analysis

**Filtering and Counting:**
```javascript
const completedDays = records.filter(day => day.completed);
const totalCompleted = completedDays.length;
```

**Mapping for Transformation:**
```javascript
const pointsOnly = records.map(day => day.points);
const dailyNames = records.map(day => day.date);
```

**Reducing for Totals:**
```javascript
const totalPoints = records.reduce((sum, day) => {
  return day.completed ? sum + day.points : sum;
}, 0);
```

**Chaining Methods:**
```javascript
const completedDates = records
  .filter(day => day.completed)
  .map(day => day.date);
```
</SlideLayout.Full>

<SlideLayout.Full>
## Exercise Overview: Habit Data Analysis

You'll work with an array of daily habit records to:

1. **Filter completed days** to get success rate
2. **Calculate total points** across all days
3. **Find completion percentage** for progress tracking
4. **Extract specific data** like just the dates

**Array Concepts You'll Apply:**
- `filter()` to find matching records
- `reduce()` to calculate totals
- `map()` to extract specific values
- Method chaining for complex operations

**Goal**: Transform raw daily data into meaningful insights
</SlideLayout.Full>

<SlideLayout.Full>
## Arrays: Lists of Data
<CodeDisplay >
  <File name="example.js">
    
```javascript
// Exercise: Work with arrays of habit data
// TODO: Given an array of daily completion records,
// calculate various statistics

const dailyRecords = [
  { date: "2024-01-01", completed: true, points: 10 },
  { date: "2024-01-02", completed: true, points: 15 },
  { date: "2024-01-03", completed: false, points: 0 },
  { date: "2024-01-04", completed: true, points: 10 },
  { date: "2024-01-05", completed: true, points: 20 }
];

// TODO: Calculate:
// 1. Total days completed
// 2. Total points earned
// 3. Completion rate (percentage)
// 4. Array of just the completed dates

// Your code here...
```
    
  </File>
</CodeDisplay>
</SlideLayout.Full>

<SlideLayout.Full>
## Exercise: Array Transformation
<CodeDisplay >
  <File name="example.js">
    
```javascript
// Exercise: Transform habit points data
// TODO: Given an array of daily habit points,
// 1. Add 20% bonus to each
// 2. Format as strings with "pts" suffix
// 3. Filter to show only days with 50+ points

const dailyPoints = [30, 45, 60, 20, 75, 40, 90];
const BONUS_RATE = 0.20;

// Goal: ["72 pts", "90 pts", "108 pts"]
// Your code here...
```
    
  </File>
</CodeDisplay>
</SlideLayout.Full>

<SlideLayout.Full>
  <FlexBox alignItems="center" justifyContent="center" flexDirection="column">
    ## Combining Objects and Arrays
    **Most real applications use both:**
    - Arrays of objects (list of habits)
    - Objects containing arrays (habit with completion dates)
    - Nested structures for complex data
    
    **Example: Habit Tracker Data Structure**
    - User object contains array of habits
    - Each habit is an object with properties
    - Completion history is array of dates
  </FlexBox>
</SlideLayout.Full>

<SlideLayout.Full>
## Exercise: Local Storage Integration
<CodeDisplay >
  <File name="example.js">
    
```javascript
// Exercise: Save and load habits from localStorage
// TODO: Implement persistence for the habit tracker

const habitStorage = {
  // TODO: Implement these methods
  save(habits) {
    // Save habits array to localStorage
    // Your code here...
  },
  
  load() {
    // Load habits from localStorage
    // Return empty array if none exist
    // Your code here...
  },
  
  clear() {
    // Remove habits from localStorage
    // Your code here...
  }
};

// Test your implementation
const testHabits = [
  { name: "Exercise", category: "health", streak: 5 },
  { name: "Read", category: "learning", streak: 3 }
];

habitStorage.save(testHabits);
const loaded = habitStorage.load();
console.log("Loaded:", loaded);
```
    
  </File>
</CodeDisplay>
</SlideLayout.Full>

<SlideLayout.Full>
## Exercise: Date Handling for Streaks
<CodeDisplay >
  <File name="example.js">
    
```javascript
// Exercise: Calculate streaks with proper date handling
// TODO: Implement streak calculation logic

const streakCalculator = {
  // TODO: Implement these methods
  isConsecutive(date1, date2) {
    // Check if date2 is exactly one day after date1
    // Your code here...
  },
  
  calculateStreak(completionDates) {
    // Given array of date strings (YYYY-MM-DD), 
    // calculate current streak ending today
    // Your code here...
  },
  
  getLongestStreak(completionDates) {
    // Find the longest streak in the history
    // Your code here...
  }
};

// Test data
const dates = [
  "2024-01-01", "2024-01-02", "2024-01-03", // 3-day streak
  "2024-01-05", "2024-01-06",                // 2-day streak
  "2024-01-08"                               // 1-day streak
];

console.log("Current streak:", streakCalculator.calculateStreak(dates));
console.log("Longest streak:", streakCalculator.getLongestStreak(dates));
```
    
  </File>
</CodeDisplay>
</SlideLayout.Full>

<SlideLayout.Full>
  <FlexBox alignItems="center" justifyContent="center" flexDirection="column">
    ## Working with Complex Data
    **Real apps need sophisticated data handling:**
    
    **1. Data Transformation**
    - Use map() to transform data shapes
    - Use filter() to subset data
    - Use reduce() for aggregations
    
    **2. Data Persistence**
    - Serialize with JSON.stringify()
    - Parse with JSON.parse()
    - Handle errors gracefully
    
    **3. Data Validation**
    - Check types and structure
    - Provide defaults for missing data
    - Sanitize user input
  </FlexBox>
</SlideLayout.Full>

<SlideLayout.Full>
## Exercise: Habit Analytics
<CodeDisplay >
  <File name="example.js">
    
```javascript
// Exercise: Build analytics for habit data
// TODO: Implement methods to analyze habit performance

const habitAnalytics = {
  // TODO: Calculate completion rate for a habit
  getCompletionRate(habit, daysTracked) {
    // Return percentage of days completed
    // Your code here...
  },
  
  // TODO: Get habits by category
  getHabitsByCategory(habits, category) {
    // Return array of habits in given category
    // Your code here...
  },
  
  // TODO: Find best performing habits
  getTopHabits(habits, limit = 3) {
    // Return top habits by completion count
    // Your code here...
  },
  
  // TODO: Calculate category statistics
  getCategoryStats(habits) {
    // Return object with stats per category
    // { category: { count, totalCompletions, avgStreak } }
    // Your code here...
  }
};

// Test data
const sampleHabits = [
  { name: "Exercise", category: "health", completions: 45, streak: 15 },
  { name: "Meditate", category: "wellness", completions: 30, streak: 10 },
  { name: "Read", category: "learning", completions: 60, streak: 20 },
  { name: "Water", category: "health", completions: 90, streak: 30 },
  { name: "Journal", category: "wellness", completions: 25, streak: 5 }
];
```
    
  </File>
</CodeDisplay>
</SlideLayout.Full>

<SlideLayout.Full>
## Key Takeaways: Objects and Arrays

<Box width="80%">
  <Text fontSize="24px" fontWeight="bold" marginBottom="30px">Objects</Text>
  - Use for structured data with named properties
  - Perfect for modeling real-world entities
  - Support methods for behavior
  
  <Text fontSize="24px" fontWeight="bold" marginTop="40px" marginBottom="30px">Arrays</Text>
  - Use for ordered lists of similar items
  - Powerful methods for data transformation
  - Essential for handling collections
  
  <Text fontSize="20px" fontStyle="italic" marginTop="40px">Master these, and you can model any data structure!</Text>
</Box>
</SlideLayout.Full>