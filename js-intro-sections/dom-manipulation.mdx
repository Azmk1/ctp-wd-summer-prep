import { SlideLayout, Image, FlexBox, UnorderedList, ListItem, Box} from 'spectacle'

<SlideLayout.Full>
## The DOM: Bringing Pages to Life
```javascript
// Selecting elements
const button = document.querySelector("#myButton");
const divs = document.querySelectorAll("div");

// Modifying elements
button.textContent = "Click me!";
button.style.backgroundColor = "blue";
button.classList.add("active");

// Event handling
button.addEventListener("click", (event) => {
  console.log("Button clicked!");
  event.target.disabled = true;
});

// Creating elements
const newDiv = document.createElement("div");
newDiv.innerHTML = "<p>Hello World!</p>";
document.body.appendChild(newDiv);
```
</SlideLayout.Full>

<SlideLayout.Center>
## Exercise: Interactive Todo List

```javascript
// Create a simple todo list with add and remove functionality
// HTML: <input id="todoInput"> <button id="addBtn">Add</button> <ul id="todoList"></ul>

// Mock DOM for testing
document.body.innerHTML = `
  <input id="todoInput" value="Test Todo">
  <button id="addBtn">Add</button>
  <ul id="todoList"></ul>
`;

const input = document.querySelector("#todoInput");
const addBtn = document.querySelector("#addBtn");
const todoList = document.querySelector("#todoList");

// Add event listener to button
addBtn.addEventListener("click", () => {
  // Your code here: create li, add text, add delete button
});

// Simulate a click to test
addBtn.click();

// ***
describe('Todo List - Initial Implementation', () => {
  it('should add a todo when button is clicked', () => {
    expect(todoList.children).to.have.lengthOf(1);
  });
  
  it('should display the correct todo text', () => {
    expect(todoList.children[0].textContent).to.equal("Test Todo");
  });
  
  it('should clear the input after adding todo', () => {
    expect(input.value).to.equal("");
  });
});
// ---
// Step 1: Create and add todo items
document.body.innerHTML = `
  <input id="todoInput" value="Test Todo">
  <button id="addBtn">Add</button>
  <ul id="todoList"></ul>
`;

const input = document.querySelector("#todoInput");
const addBtn = document.querySelector("#addBtn");
const todoList = document.querySelector("#todoList");

addBtn.addEventListener("click", () => {
  const todoText = input.value.trim();
  if (todoText === "") return;
  
  // Create list item
  const li = document.createElement("li");
  li.textContent = todoText;
  
  // Add to list and clear input
  todoList.appendChild(li);
  input.value = "";
});

// Simulate click
addBtn.click();

// ***
describe('Todo List - Step 1: Basic functionality', () => {
  it('should have one todo item after clicking add', () => {
    expect(todoList.children).to.have.lengthOf(1);
  });
  
  it('should display correct todo text', () => {
    expect(todoList.children[0].textContent).to.equal("Test Todo");
  });
  
  it('should clear input after adding', () => {
    expect(input.value).to.equal("");
  });
  
  it('should not add empty todos', () => {
    input.value = "";
    addBtn.click();
    expect(todoList.children).to.have.lengthOf(1);
  });
});
// ---
// Step 2: Add delete buttons to each todo
document.body.innerHTML = `
  <input id="todoInput" value="Test Todo">
  <button id="addBtn">Add</button>
  <ul id="todoList"></ul>
`;

const input = document.querySelector("#todoInput");
const addBtn = document.querySelector("#addBtn");
const todoList = document.querySelector("#todoList");

addBtn.addEventListener("click", () => {
  const todoText = input.value.trim();
  if (todoText === "") return;
  
  const li = document.createElement("li");
  li.textContent = todoText;
  
  // Create delete button
  const deleteBtn = document.createElement("button");
  deleteBtn.textContent = "Delete";
  deleteBtn.addEventListener("click", () => {
    li.remove();
  });
  
  li.appendChild(deleteBtn);
  todoList.appendChild(li);
  input.value = "";
});

// Add a todo
addBtn.click();

// ***
describe('Todo List - Step 2: Delete functionality', () => {
  it('should have one todo item initially', () => {
    expect(todoList.children).to.have.lengthOf(1);
  });
  
  it('should have a delete button with correct text', () => {
    const deleteBtn = todoList.querySelector("button");
    expect(deleteBtn).to.exist;
    expect(deleteBtn.textContent).to.equal("Delete");
  });
  
  it('should remove todo when delete button is clicked', () => {
    const deleteBtn = todoList.querySelector("button");
    deleteBtn.click();
    expect(todoList.children).to.have.lengthOf(0);
  });
});
// ---
// Step 3: Add enter key support and styling
document.body.innerHTML = `
  <input id="todoInput" value="Test Todo">
  <button id="addBtn">Add</button>
  <ul id="todoList"></ul>
`;

const input = document.querySelector("#todoInput");
const addBtn = document.querySelector("#addBtn");
const todoList = document.querySelector("#todoList");
let addCount = 0;

function addTodo() {
  const todoText = input.value.trim();
  if (todoText === "") return;
  
  addCount++;
  
  const li = document.createElement("li");
  li.style.marginBottom = "10px";
  
  const span = document.createElement("span");
  span.textContent = todoText;
  span.style.marginRight = "10px";
  
  const deleteBtn = document.createElement("button");
  deleteBtn.textContent = "Delete";
  deleteBtn.style.marginLeft = "auto";
  deleteBtn.addEventListener("click", () => li.remove());
  
  li.appendChild(span);
  li.appendChild(deleteBtn);
  todoList.appendChild(li);
  input.value = "";
  input.focus();
}

addBtn.addEventListener("click", addTodo);
input.addEventListener("keypress", (e) => {
  if (e.key === "Enter") addTodo();
});

// Test click
addBtn.click();

// Test enter key
input.value = "Another Todo";
const enterEvent = new KeyboardEvent("keypress", { key: "Enter" });
input.dispatchEvent(enterEvent);

// ***
describe('Todo List - Step 3: Enhanced functionality', () => {
  it('should add todos via button click and enter key', () => {
    expect(addCount).to.equal(2);
    expect(todoList.children).to.have.lengthOf(2);
  });
  
  it('should have correct todo structure', () => {
    const firstTodo = todoList.children[0];
    const span = firstTodo.querySelector("span");
    expect(span).to.exist;
    expect(span.textContent).to.equal("Test Todo");
  });
  
  it('should apply correct styling', () => {
    const firstTodo = todoList.children[0];
    expect(firstTodo.style.marginBottom).to.equal("10px");
  });
  
  it('should focus input after adding todo', () => {
    expect(document.activeElement).to.equal(input);
  });
});
```
</SlideLayout.Center>